<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Turing Machine Simulator</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>

  <body>
    <div class="container my-4">
      <!-- Header -->
      <div class="text-center mb-5">
        <h1 class="display-4 fw-bold">
          <i class="fas fa-cogs me-2"></i>Turing Machine Simulator
        </h1>
        <p class="lead text-muted">
          Visualize and simulate Turing machine computations step by step
        </p>
      </div>

      <div class="row g-4">
        <!-- Control Panel -->
        <div class="col-lg-4">
          <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
              <h5 class="mb-0">
                <i class="fas fa-sliders-h me-2"></i>Control Panel
              </h5>
            </div>
            <div class="card-body">
              <!-- Machine Selector -->
              <div class="mb-3">
                <label for="machineSelect" class="form-label"
                  >Select Machine</label
                >
                <select class="form-select" id="machineSelect">
                  <option value="" selected disabled>Select a machine</option>
                </select>
              </div>

              <!-- Tape Input -->
              <div class="mb-3">
                <label for="initialTape" class="form-label"
                  >Initial Tape Content</label
                >
                <div class="input-group">
                  <span class="input-group-text"
                    ><i class="fas fa-tape"></i
                  ></span>
                  <input
                    type="text"
                    class="form-control"
                    id="initialTape"
                    placeholder="Enter initial tape content"
                  />
                  <button
                    class="btn btn-outline-secondary"
                    type="button"
                    id="clearTape"
                  >
                    <i class="fas fa-eraser"></i>
                  </button>
                </div>
                <div class="form-text">
                  Use symbols from the machine's input alphabet
                </div>
              </div>

              <!-- Buttons -->
              <div class="d-grid gap-2 mb-3">
                <button id="initBtn" class="btn btn-primary">
                  <i class="fas fa-play me-2"></i>Initialize
                </button>
                <button id="resetBtn" class="btn btn-warning">
                  <i class="fas fa-redo me-2"></i>Reset
                </button>
              </div>
              <div class="d-flex justify-content-between mb-3">
                <button
                  id="stepBtn"
                  class="btn btn-success flex-fill me-1"
                  disabled
                >
                  <i class="fas fa-step-forward me-1"></i>Step
                </button>
                <button
                  id="runBtn"
                  class="btn btn-info flex-fill mx-1"
                  disabled
                >
                  <i class="fas fa-play-circle me-1"></i>Run
                </button>
                <button
                  id="runFastBtn"
                  class="btn btn-dark flex-fill ms-1"
                  disabled
                >
                  <i class="fas fa-forward me-1"></i>Fast
                </button>
              </div>

              <!-- Status -->
              <div
                class="status-panel p-3 mb-3 text-center border rounded bg-light"
              >
                <h6 class="mb-1">Status</h6>
                <div id="statusInfo" class="fst-italic text-muted">
                  Not initialized
                </div>
              </div>

              <!-- Current State / Step -->
              <div class="text-center">
                <span class="badge bg-secondary me-2"
                  ><i class="fas fa-microchip me-1"></i>State:
                  <span id="currentState">-</span></span
                >
                <span class="badge bg-info"
                  ><i class="fas fa-shoe-prints me-1"></i>Step:
                  <span id="stepCount">0</span></span
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Tape & Machine Info -->
        <div class="col-lg-8">
          <!-- Tape -->
          <div class="card shadow-sm mb-4">
            <div class="card-header bg-success text-white">
              <h5 class="mb-0">
                <i class="fas fa-project-diagram me-2"></i>Tape
              </h5>
            </div>
            <div class="card-body">
              <div
                id="tapeContainer"
                class="tape-container text-center text-muted"
              >
                Initialize the machine to see the tape
              </div>
            </div>
          </div>

          <!-- Machine Definition -->
          <div class="card shadow-sm">
            <div class="card-header bg-secondary text-white">
              <h5 class="mb-0">
                <i class="fas fa-info-circle me-2"></i>Machine Definition
              </h5>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-md-6">
                  <h6>States</h6>
                  <div id="statesInfo">-</div>

                  <h6 class="mt-3">Alphabets</h6>
                  <div>
                    <strong>Input:</strong> <span id="inputAlphabet">-</span>
                  </div>
                  <div>
                    <strong>Tape:</strong> <span id="tapeAlphabet">-</span>
                  </div>
                  <div>
                    <strong>Blank:</strong> <span id="blankSymbol">-</span>
                  </div>

                  <h6 class="mt-3">Special States</h6>
                  <div>
                    <strong>Initial:</strong> <span id="initialState">-</span>
                  </div>
                  <div>
                    <strong>Final:</strong> <span id="finalStates">-</span>
                  </div>
                </div>
                <div class="col-md-6">
                  <h6>Transitions</h6>
                  <div
                    id="transitionsList"
                    class="list-group text-center text-muted"
                  >
                    No transitions loaded
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- History -->
      <div class="row mt-4">
        <div class="col-12">
          <div class="card shadow-sm">
            <div class="card-header bg-dark text-white">
              <h5 class="mb-0">
                <i class="fas fa-history me-2"></i>Computation History
              </h5>
            </div>
            <div class="card-body table-responsive">
              <table class="table table-hover align-middle mb-0">
                <thead class="table-light">
                  <tr>
                    <th>Step</th>
                    <th>State</th>
                    <th>Read Symbol</th>
                    <th>Tape Content</th>
                    <th>Head Position</th>
                  </tr>
                </thead>
                <tbody id="historyTable">
                  <tr>
                    <td colspan="5" class="text-center text-muted">
                      No history yet
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>
